;; laptop keyboard config file


(defcfg
  process-unmapped-keys yes
  concurrent-tap-hold yes
)

(deflocalkeys-linux
  č 39
  š 26
  đ 27
  ć 40
  ž 43
  ' 12
  < 86
  - 53
  z 21
  y 44
)

(defvar
  tap-timeout 200
  hold-timeout 200
  tt $tap-timeout
  ht $hold-timeout
)

(defsrc
  grv  1    2    3    4    5    6    7    8    9    0    '    =    bspc
  tab  q    w    e    r    t    z    u    i    o    p    š    đ    ž
  caps a    s    d    f    g    h    j    k    l    č    ć    ret
  lsft y    x    c    v    b    n    m    ,    .    -    rsft
  lctl lmet lalt           spc            ralt rmet rctl
)

(defalias
  cap (tap-hold $tap-timeout $hold-timeout esc lctl)

  la (tap-hold-release $tt $ht x lalt)
  lc (tap-hold-release $tt $ht c lctl)

  movl (tap-hold $tt $ht f (layer-while-held movs))

  rc (tap-hold-release $tt $ht , rctl)
  ra (tap-hold-release $tt $ht . lalt)

  sym-mod (tap-hold $tt $ht spc (layer-while-held syms))

)

;; zagrade
(defalias
  lp S-8   ;; left parenthsis
  rp S-9   ;; right parenthsis
  lsb RA-f ;; left square bracket
  rsb RA-g ;; right square bracket
  lcb RA-b ;; left curly bracket
  rcb RA-n ;; right curly bracket
  lab <    ;; left angle bracket
  rab S-<  ;; right angle bracket
)  

(defalias
  at RA-v    ;; @
  and S-6    ;; &
  til RA-1   ;; ~
  bsla RA-q  ;; \
  sla S-7    ;; /
  bkt RA-7   ;; `
  qt '      
  dqt S-2    ;; " 
  car RA-3   ;; ^
  exc S-1    ;; !
  que S-'    ;; ?
  dol S-4    ;; $
  hash S-3   ;; #
  ast S-=    ;; *
)

(defalias
  td0 (tap-dance 200 (RA-q RA-w))
  td1 (tap-dance 200 (@lsb @lab))
  td2 (tap-dance 200 (@rsb @rab))
)

(defalias
  cs (multi lsft lctl)
)

(defchordsv2
;;  (m ,) bspc 200 all-released ()
;;  (c v) del 200 all-released ()
    (alt ralt) caps 200 all-released ()
)


(deflayer base
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   |  grv  |   1   |   2   |   3   |   4   |   5   |   6   |   7   |   8   |   9   |   0   |   '   |   +   | bspc |
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
        esc      1       2       3       4       5       6       7       8       9       0       '       =     bspc
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   |  tab  |   q   |   w   |   e   |   r   |   t   |   z   |   u   |   i   |   o   |   p   |   š   |   đ   |  ž   |
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
        tab      q       w      e        r       t       z       u       i       o       p       š       đ      ž
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   | caps  |   a   |   s   |   d   |   f   |   g   |   h   |   j   |   k   |   l   |   č   |   ć   |  ret  | 
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
       bspc      a       s     d      @movl      g       h       j       k       l       č       ć      ret
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   | lsft  |   <>  |   y   |   x   |   c   |   v   |   b   |   n   |   m   |   ,   |   .   |   -   |  rsft | 
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
       lsft              y      @la    @lc       v       b       n       m      @rc     @ra      -      rsft
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   | lctl  | meta  |  alt  |                          space                        | ralt  | meta  |  rctl | 
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
       alt     lmet    lsft                             @sym-mod                       rsft    rmet     ralt
)



(deflayer movs
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   |  grv  |   1   |   2   |   3   |   4   |   5   |   6   |   7   |   8   |   9   |   0   |   '   |   +   | bspc |
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
        XX      XX      XX      XX      XX      XX      XX      XX      XX      XX      XX      XX      XX      XX 
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   |  tab  |   q   |   w   |   e   |   r   |   t   |   z   |   u   |   i   |   o   |   p   |   š   |   đ   |  ž   |
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
        XX       XX     XX       XX     XX      XX      XX       XX      up     XX      XX      XX       XX     XX 
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   | caps  |   a   |   s   |   d   |   f   |   g   |   h   |   j   |   k   |   l   |   č   |   ć   |  ret  | 
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
        XX      @cs    lsft     lctl     XX      XX      XX    left    down    right     XX      XX      XX
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   | lsft  |   <>  |   y   |   x   |   c   |   v   |   b   |   n   |   m   |   ,   |   .   |   -   |  rsft | 
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
        XX               XX     alt      XX      XX      XX      XX      XX      XX      XX      XX      XX
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   | lctl  | meta  |  alt  |                          space                        | ralt  | meta  |  rctl | 
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
        XX      XX      XX                               XX                              XX     XX       XX
)


(deflayer syms
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   |  grv  |   1   |   2   |   3   |   4   |   5   |   6   |   7   |   8   |   9   |   0   |   '   |   +   | bspc |
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
        XX      XX      XX      XX      XX      XX      XX      XX      XX      XX      XX      XX      XX      XX 
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   |  tab  |   q   |   w   |   e   |   r   |   t   |   z   |   u   |   i   |   o   |   p   |   š   |   đ   |  ž   |
;;   |  tab  |   q   |   `   |   €   |   r   |   t   |   z   |   {   |   [<  |   ]>  |   }   |   š   |   đ   |  ž   |
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
        XX      XX      RA-7   RA-e     XX      XX      XX      @lcb    @td1    @td2   @rcb       XX      XX     RA-w
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   | caps  |   a   |   s   |   d   |   f   |   g   |   h   |   j   |   k   |   l   |   č   |   ć   |  ret  | 
;;   | ?     |   !   |   "   |   #   |   $   |   %   |   &   |   /   |   (   |   )   |   =   |   \|  |  ret  | 
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
        S-'     S-1     S-2     S-3     S-4     S-5     S-6    S-7     S-8     S-9     S-0      @td0    XX
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   | lsft  |   <>  |   y   |   x   |   c   |   v   |   b   |   n   |   m   |   ,   |   .   |   -   |  rsft | 
;;   | lsft  |   <>  |   ~   |   '   |   ^   |   @   |   b   |   +   |   *   |   ;   |   :   |   _   |  rsft | 
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
        XX              RA-1     '     RA-3    RA-v     XX       +      S-=     S-,     S-.     S--     XX
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
;;   | lctl  | meta  |  alt  |                          space                        | ralt  | meta  |  rctl | 
;;   +-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+------+
        XX      XX      XX                               XX                              XX     XX       XX
)
